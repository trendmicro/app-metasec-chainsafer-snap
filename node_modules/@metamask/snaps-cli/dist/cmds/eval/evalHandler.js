"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.evalHandler = void 0;
const snaps_utils_1 = require("@metamask/snaps-utils");
const utils_1 = require("@metamask/utils");
/**
 * Runs the snap in a worker, to ensure SES compatibility.
 *
 * @param argv - The Yargs arguments object.
 * @returns A promise that resolves once the eval has finished.
 * @throws If the eval failed.
 */
async function evalHandler(argv) {
    const { bundle: bundlePath } = argv;
    (0, utils_1.assert)(typeof bundlePath === 'string');
    try {
        await (0, snaps_utils_1.evalBundle)(bundlePath);
        (0, snaps_utils_1.logInfo)(`Eval Success: evaluated '${bundlePath}' in SES!`);
    }
    catch (error) {
        throw new Error(`Snap evaluation error: ${error.message}`);
    }
}
exports.evalHandler = evalHandler;
//# sourceMappingURL=evalHandler.js.map